function $$(a) { return "string" == typeof a ? document.getElementById(a) : a }; function getQueryStr(a) { var b = new RegExp("(^|\\?|&)" + a + "=([^&]*)(\\s|&|$)", "i"); if (b.test(location.href)) return decodeURIComponent(RegExp.$2.replace(/\+/g, " ")); return "" }; String.prototype.format = function () { if (arguments.length == 0) return this; for (var s = this, i = 0; i < arguments.length; i++) s = s.replace(new RegExp("\\{" + i + "\\}", "g"), arguments[i]); return s }; var browser = { is_weixin: function () { var a = navigator.userAgent.toLowerCase(); if (a.match(/MicroMessenger/i) == "micromessenger") { return true } else { return false } }, is_qq: function () { var a = navigator.userAgent.toLowerCase(); if (a.match(/qq/i) == "qq") { return true } else { return false } }, is_weibo: function () { var a = navigator.userAgent.toLowerCase(); if (a.match(/WeiBo/i) == "weibo") { return true } else { return false } }, is_miaobo: function () { var a = navigator.userAgent.toLowerCase(); if (a.match(/MicroMessenger/i) == "micromessenger") { return true } else { return false } }, versions: function () { var u = navigator.userAgent, app = navigator.appVersion; return { trident: u.indexOf('Trident') > -1, presto: u.indexOf('Presto') > -1, webKit: u.indexOf('AppleWebKit') > -1, gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, mobile: !!u.match(/AppleWebKit.*Mobile.*/) || !!u.match(/AppleWebKit/), ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, iPad: u.indexOf('iPad') > -1, webApp: u.indexOf('Safari') == -1 } }(), language: (navigator.browserLanguage || navigator.language).toLowerCase() }; var live = { ShowCard: function (a, b) { if (b <= 0) { alert('获取用户信息失败！'); return }; if (browser.versions.ios) { a.setAttribute("href", "miaobowpa:/ShowCard&useridx=" + b + "&") } else if (browser.versions.android) { a.setAttribute("href", "javascript:android.showUserCard(" + b + ")") } }, EnterGame: function (a, b) { if (browser.versions.ios) { a.setAttribute("href", "miaobowpa:/EnterGame&gameid=" + b + "&") } else if (browser.versions.android) { a.setAttribute("href", "javascript:android.showGame(" + b + ")") } }, SetFollow: function (a, b, c, d) { if (browser.versions.ios) { a.setAttribute("href", "miaobowpa:/SetFollow&type=" + b + "&fromidx=" + c + "&touseridx=" + d + "&") } else if (browser.versions.android) { a.setAttribute("href", "javascript:setFollow(" + b + "," + c + "," + d + ")") } }, ReturnAPP: function (a) { if (browser.versions.ios) { a.setAttribute("href", "miaobowpa:/GoBackAPP&") } else if (browser.versions.android) { a.setAttribute("href", "javascript:android.goBackAPP()") } }, Share: function (a, b) { if (browser.versions.ios) { var c = location.href; if (c.indexOf('?') > -1) { c += '&share=true' } a.setAttribute("href", "miaobowpa:/ShareLink&title=" + b + "&linkurl=" + c + "&content=&smallimage=&") } else if (browser.versions.android) { a.setAttribute("href", "javascript:android.share()") } }, ApplyView: function (a) { if (browser.versions.ios) { a.setAttribute("href", "miaobowpa:/GoApplyView&") } else if (browser.versions.android) { a.setAttribute("href", "javascript:android.goBackAPP()") } }, ShowLivingRoom: function (a, b) { if (browser.versions.ios) { a.setAttribute("href", "miaobowpa:/RoomManage&useridx=" + b + "&") } else if (browser.versions.android) { a.setAttribute("href", "javascript:android.RoomManage(" + b + ")") } }, ShowBabyView: function (a, b) { if (browser.versions.ios) { a.setAttribute("href", "miaobowpa:/BabyView&useridx=" + b + "&") } else if (browser.versions.android) { a.setAttribute("href", "javascript:android.babyView(" + b + ")") } }, GetGradeRank: function (a) { var b = 1; if (a > 0 && a <= 40) { b = 1 } else if (a > 40 && a <= 80) { b = 2 } else if (a > 80 && a <= 120) { b = 3 } else if (a > 120 && a <= 160) { b = 4 } else if (a > 160 && a <= 190) { b = 5 } else if (a > 190) { b = 6 } return b }, GetVipName: function (a) { var b = ""; switch (a) { case 1: b = "普通土豪"; break; case 11: b = "红色VIP"; break; case 15: b = "紫色VIP"; break; case 30: b = "蓝色皇冠"; break; case 31: b = "紫色皇冠"; break; case 32: b = "超级皇冠"; break; case 34: b = "钻石皇冠"; break; case 35: b = "王者皇冠"; break; case 36: b = "代理"; break; case 39: b = "至尊皇冠"; break; default: b = ""; break } return b } }; function getCookie(a, b) { if (document.cookie.length > 0) { var c = document.cookie.indexOf(a + "="); if (c != -1) { c = c + a.length + 1; var d = document.cookie.indexOf(';', c); if (b) { var e = document.cookie.indexOf('&', c); if (d == -1 || (e > -1 && d > e)) d = e } if (d == -1) { d = document.cookie.length } return unescape(document.cookie.substring(c, d)) } } return null } function download() { if (browser.is_weixin()) { window.location = "http://a.app.qq.com/o/simple.jsp?pkgname=com.tiange.miaolive" } else if (browser.versions.ios || browser.versions.iPhone || browser.versions.iPad) { console.log('1'); window.location = "http://url.cn/5oIzU6g" } else if (browser.versions.android) { window.location.href = "http://update.9158.com/miaolive/Miaolive.apk" } else { window.location.href = "http://a.app.qq.com/o/simple.jsp?pkgname=com.tiange.miaolive" } } function init_i18n(a) { jQuery.i18n.properties({ name: 'strings', path: '/content/i18n/lang/', mode: 'map', cache: false, callback: function () { console.log(a); if (a != 0) { a() } } }) } var TgBase = { version: "1.0.0" }; var TgProj = { version: "1.0.0" }; TgBase.Cookie = { set: function (a, b, c, d, e) { var f; if (typeof (c) == "undefined" || (c == null)) { f = new Date(new Date().getTime() + 24 * 3600 * 1000) } else { f = new Date(new Date().getTime() + c * 1000) } document.cookie = a + "=" + escape(b) + ((f) ? "; expires=" + f.toGMTString() : "") + ((d) ? "; path=" + d : "; path=/") + ((e) ? ";domain=" + e : "") }, get: function (a, b) { var c = new RegExp((b ? a + "=(?:.*?&)*?" + b + "=([^&;$]*)" : a + "=([^;$]*)"), "i"); return c.test(unescape(document.cookie)) ? RegExp["$1"] : "" }, clear: function (a, b, c) { if (this.get(a)) { document.cookie = a + "=" + ((b) ? "; path=" + b : "; path=/") + ((c) ? "; domain=" + c : "") + ";expires=Fri, 02-Jan-1970 00:00:00 GMT" } } };