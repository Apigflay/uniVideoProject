(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-chat"],{6040:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=t("8fed"),n={data:function(){return{tabbarLoginLanguage:null,show_spot:!0,show_chat:!1,no:!1,table:[{id:0,data:"09/09",name:"@sasa.baby1235",content:"9月vip为两台飞机  享有8.9月百部影片，你的女神...",no:!1},{id:1,data:"09/09",name:"@sasa.baby1236",content:"9月vip为两台飞机  享有8.9月百部影片，你的女神...",no:!1},{id:2,data:"09/09",name:"@sasa.baby1237",content:"9月vip为两台飞机  享有8.9月百部影片，你的女神...",no:!1}],page:1,chatListData:null,tabbarLoginData:null,isAnchor:null,tabbarCurrent:0,tabbarData:[{imgsrcB:"../../static/imgs/room1w.png",imgsrcW:"../../static/imgs/room1w.png",text:"1"},{imgsrcB:"../../static/imgs/fang1w.png",imgsrcW:"../../static/imgs/fang1w.png",text:"2"},{imgsrcB:"../../static/imgs/mail1w.png",imgsrcW:"../../static/imgs/mail1w.png",text:"3"},{imgsrcB:"../../static/imgs/xin1w.png",imgsrcW:"../../static/imgs/xin1y.png",text:"4"},{imgsrcB:"../../static/imgs/my1w.png",imgsrcW:"../../static/imgs/my1w.png",text:"5"}]}},onLoad:function(){this.getLoginMsg(),this.getLoginlanger()},onPageScroll:function(){},methods:{getLoginlanger:function(){var a=this;uni.getStorage({key:"storage_login_language",success:function(e){a.tabbarLoginLanguage=JSON.parse(e.data),0==a.tabbarLoginLanguage?a.langer=0:1==a.tabbarLoginLanguage?a.langer=1:2==a.tabbarLoginLanguage?a.langer=2:3==a.tabbarLoginLanguage&&(a.langer=3)}})},getLoginMsg:function(){var a=this;uni.getStorage({key:"storage_login_str",success:function(e){a.tabbarLoginData=JSON.parse(e.data),0==a.tabbarLoginData.isAnchor&&(a.isAnchor=!1),a.getChatList()}})},getClickPer:function(a){this.tabbarCurrent=a.currentTarget.id,0==a.currentTarget.id?(0,i.navigateTo)("/pages/home/home",null):1==a.currentTarget.id?(0,i.navigateTo)("/pages/search/search",null):2==a.currentTarget.id?(0,i.navigateTo)("/pages/news/news",null):3==a.currentTarget.id?(0,i.navigateTo)("/pages/chat/chat",null):4==a.currentTarget.id&&(0==this.isAnchor?(0,i.navigateTo)("/pages/my/my",null):(0,i.navigateTo)("/pages/anchorme/anchorme",null))},chat_start:function(a){0==this.table[a].no&&(this.table[a].no=!0)},chat_end:function(a){1==this.table[a].no&&(this.table[a].no=!1)},new_chat_start:function(){0==this.no&&(this.no=!0)},new_chat_end:function(){1==this.no&&(this.no=!1)},getChatList:function(){var a=(0,i.base64ToArrayBuffer)((0,i.encrypt)(JSON.stringify({UserIdx:this.tabbarLoginData.useridx,Page:this.page,Limit:20}))),e=JSON.parse((0,i.decrypt)((0,i.sendData)("POST",this.GLOBAL.urlPoint+"/userinfo/GetChatList",a)));if(100==e.code){var t=JSON.parse(JSON.stringify(e.data.list));t.forEach(function(a,e){var t=new Date(a.lastTime).getMonth()+1,i=new Date(a.lastTime).getDate();a.lastTime=t+"/"+i}),this.getNewChatData(t)}else uni.showToast({title:e.msg,duration:1500,icon:"none"})},new_chat:function(){(0,i.navigateTo)("/pages/newchat/newchat",null)},goAchormePage:function(a){var e=encodeURIComponent((0,i.encrypt)(JSON.stringify({AnchorIdx:a,Type:2,pageId:13})));(0,i.navigateTo)("/pages/anchorpersonal/anchorpersonal",e)},goChatpopPage:function(a,e,t,n){var s=encodeURIComponent((0,i.encrypt)(JSON.stringify({useridx:a,nickname:e,headpic:t,online:n,pageId:13})));(0,i.navigateTo)("/pages/chatpop/chatpop",s)},getNewChatData:function(a){var e=this,t=JSON.stringify({appId:100,useridx:this.tabbarLoginData.useridx}),n=(0,i.sendD207)(t);0==this.$Socket.isconnect&&this.$Socket.onReload(),this.$Socket.nsend(n),this.$Socket.eventPatch.onMsg(function(t,n){setTimeout(function(){var n=new FileReader;n.onload=function(t){var n=this.result,s=new Uint32Array(n,0,3),o=new Uint8Array(n,12,s[0]-12-1),r=(new TextDecoder).decode(o),c=JSON.parse(r);if(20008==s[1])if(0==c.code&&null!=c.msgs){a.forEach(function(a,e){a.newMsgData=[],c.msgs.forEach(function(e,t){a.useridx==e.useridx&&a.newMsgData.push(e)})}),e.chatListData=a;var l=[];c.msgs.forEach(function(a,e){l.push(a.msgId)});var d=l.sort(function(a,e){return e-a})[0],g=JSON.stringify({appId:100,msgId:d,useridx:e.tabbarLoginData.useridx}),u=(0,i.sendD209)(g);0==e.$Socket.isconnect&&e.$Socket.onReload(),e.$Socket.nsend(u),e.$Socket.eventPatch.onMsg(function(a,e){setTimeout(function(){var e=new FileReader;e.onload=function(a){var e=this.result,t=new Uint32Array(e,0,3),i=new Uint8Array(e,12,t[0]-12-1),n=(new TextDecoder).decode(i);JSON.parse(n);2000899==t[1]||t[1]},e.readAsArrayBuffer(a.data)},0)})}else a.forEach(function(a,e){a.newMsgData=[]}),e.chatListData=a;else s[1]},n.readAsArrayBuffer(t.data)},0)})},getBottomNewmsg:function(){var a=this;window.onscroll=function(){var e=document.documentElement.scrollTop,t=document.documentElement.clientHeight,n=document.documentElement.scrollHeight;if(e+t==n){a.page++;var s=(0,i.base64ToArrayBuffer)((0,i.encrypt)(JSON.stringify({UserIdx:a.tabbarLoginData.useridx,Page:a.page,Limit:20}))),o=JSON.parse((0,i.decrypt)((0,i.sendData)("POST",a.GLOBAL.urlPoint+"/userinfo/GetChatList",s)));if(100==o.code){var r=JSON.parse(JSON.stringify(o.data.list));r.forEach(function(a,e){var t=new Date(a.lastTime).getMonth()+1,i=new Date(a.lastTime).getDate();a.lastTime=t+"/"+i}),a.chatListData.push(r),a.getNewChatData(a.chatListData)}else uni.showToast({title:o.msg,duration:1500,icon:"none"})}}},getScrollmsg:function(){this.page++;var a=(0,i.base64ToArrayBuffer)((0,i.encrypt)(JSON.stringify({UserIdx:this.tabbarLoginData.useridx,Page:this.page,Limit:20}))),e=JSON.parse((0,i.decrypt)((0,i.sendData)("POST",this.GLOBAL.urlPoint+"/userinfo/GetChatList",a)));if(100==e.code)if(0==e.data.list.length);else{var t=JSON.parse(JSON.stringify(e.data.list));t.forEach(function(a,e){var t=new Date(a.lastTime).getMonth()+1,i=new Date(a.lastTime).getDate();a.lastTime=t+"/"+i}),this.chatListData.push(t),console.log(t),this.getNewChatData(this.chatListData),console.log(this.chatListData)}else uni.showToast({title:e.msg,duration:1500,icon:"none"})}}};e.default=n},"671f":function(a,e,t){"use strict";t.r(e);var i=t("d814"),n=t("96ed");for(var s in n)"default"!==s&&function(a){t.d(e,a,function(){return n[a]})}(s);t("df52");var o=t("2877"),r=Object(o["a"])(n["default"],i["a"],i["b"],!1,null,"1e4a09ae",null);e["default"]=r.exports},"848f":function(a,e,t){var i=t("f56a4");"string"===typeof i&&(i=[[a.i,i,""]]),i.locals&&(a.exports=i.locals);var n=t("4f06").default;n("e3e420da",i,!0,{sourceMap:!1,shadowMode:!1})},"96ed":function(a,e,t){"use strict";t.r(e);var i=t("6040"),n=t.n(i);for(var s in i)"default"!==s&&function(a){t.d(e,a,function(){return i[a]})}(s);e["default"]=n.a},d814:function(a,e,t){"use strict";var i=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("v-uni-view",{staticClass:"contentBox"},[t("v-uni-scroll-view",{staticClass:"scrollView",attrs:{"scroll-y":"true"},on:{scrolltolower:function(e){e=a.$handleEvent(e),a.getScrollmsg(e)}}},[t("v-uni-view",{staticClass:"main"},[t("v-uni-view",{staticClass:"top"},[t("v-uni-text",[a._v(a._s(this.Language.language[this.tabbarLoginLanguage].language76))])],1),t("v-uni-view",{staticClass:"center"},[t("v-uni-view",{staticClass:"new",style:0==a.no?"":"background:#343434",on:{click:function(e){e=a.$handleEvent(e),a.new_chat()},touchstart:function(e){e=a.$handleEvent(e),a.new_chat_start()},touchend:function(e){e=a.$handleEvent(e),a.new_chat_end()}}},[t("v-uni-image",{staticClass:"img",attrs:{src:"../../static/pictures/newChat_1.png"}}),t("v-uni-text",{staticClass:"p"},[a._v(a._s(this.Language.language[this.tabbarLoginLanguage].language178))])],1),a._l(a.chatListData,function(e,i){return t("v-uni-view",{key:i,staticClass:"list",attrs:{id:i}},[t("v-uni-image",{staticClass:"photo",attrs:{src:e.headpic},on:{click:function(t){t=a.$handleEvent(t),a.goChatpopPage(e.useridx,e.nickname,e.headpic,e.online)}}}),e.newMsgData.length>0&&100>e.newMsgData.length?t("v-uni-text",{staticClass:"newMsgNum"},[a._v(a._s(e.newMsgData.length))]):a._e(),e.newMsgData.length>99?t("v-uni-text",{staticClass:"newMsgNum"},[a._v("99+")]):a._e(),t("v-uni-view",{staticClass:"content",on:{click:function(t){t=a.$handleEvent(t),a.goChatpopPage(e.useridx,e.nickname,e.headpic,e.online)}}},[t("v-uni-view",{staticClass:"name"},[t("v-uni-view",{staticClass:"nameArea"},[t("v-uni-text",{staticClass:"id"},[a._v(a._s(e.nickname))]),e.online?t("v-uni-view",{staticClass:"status"}):a._e()],1),t("v-uni-text",{staticClass:"data"},[a._v(a._s(e.lastTime))])],1),t("v-uni-view",{staticClass:"p"},[t("v-uni-text",[a._v(a._s(e.content))])],1)],1)],1)})],2),t("v-uni-view",{staticClass:"tabbarArea"},a._l(a.tabbarData,function(e,i){return t("v-uni-view",{key:i,staticClass:"per",attrs:{id:i},on:{click:function(e){e=a.$handleEvent(e),a.getClickPer(e)}}},[t("v-uni-image",{staticClass:"img",attrs:{src:e.imgsrcW,mode:""}})],1)}),1)],1)],1)],1)},n=[];t.d(e,"a",function(){return i}),t.d(e,"b",function(){return n})},df52:function(a,e,t){"use strict";var i=t("848f"),n=t.n(i);n.a},f56a4:function(a,e,t){e=a.exports=t("2350")(!1),e.push([a.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */em[data-v-1e4a09ae]{font-style:normal}body[data-v-1e4a09ae],dd[data-v-1e4a09ae],dl[data-v-1e4a09ae],h1[data-v-1e4a09ae],h2[data-v-1e4a09ae],h3[data-v-1e4a09ae],h4[data-v-1e4a09ae],h5[data-v-1e4a09ae],h6[data-v-1e4a09ae],hr[data-v-1e4a09ae],ol[data-v-1e4a09ae],p[data-v-1e4a09ae],pre[data-v-1e4a09ae],tbody[data-v-1e4a09ae],td[data-v-1e4a09ae],tfoot[data-v-1e4a09ae],th[data-v-1e4a09ae],thead[data-v-1e4a09ae],ul[data-v-1e4a09ae],uni-form[data-v-1e4a09ae],uni-input[data-v-1e4a09ae],uni-textarea[data-v-1e4a09ae]{margin:0;padding:0}ol[data-v-1e4a09ae],ul[data-v-1e4a09ae]{list-style:none}a[data-v-1e4a09ae]{text-decoration:none}html[data-v-1e4a09ae]{-ms-text-size-adjust:none;-webkit-text-size-adjust:none;-moz-text-size-adjust:none;text-size-adjust:none}body[data-v-1e4a09ae]{line-height:1.5;font-size:14px}body[data-v-1e4a09ae],select[data-v-1e4a09ae],uni-button[data-v-1e4a09ae],uni-input[data-v-1e4a09ae],uni-textarea[data-v-1e4a09ae]{font-family:helvetica neue,tahoma,hiragino sans gb,stheiti,wenquanyi micro hei,\\5FAE\\8F6F\\96C5\\9ED1,\\5B8B\\4F53,sans-serif}b[data-v-1e4a09ae],strong[data-v-1e4a09ae]{font-weight:700}em[data-v-1e4a09ae],i[data-v-1e4a09ae]{font-style:normal}table[data-v-1e4a09ae]{border-collapse:collapse;border-spacing:0}table td[data-v-1e4a09ae],table th[data-v-1e4a09ae]{border:1px solid #ddd;padding:5px}table th[data-v-1e4a09ae]{font-weight:inherit;border-bottom-width:2px;border-bottom-color:#ccc}img[data-v-1e4a09ae]{border:0 none;width:auto\\9;max-width:100%;vertical-align:top;height:auto}select[data-v-1e4a09ae],uni-button[data-v-1e4a09ae],uni-input[data-v-1e4a09ae],uni-textarea[data-v-1e4a09ae]{font-family:inherit;font-size:100%;margin:0;vertical-align:baseline}html uni-input[type=button][data-v-1e4a09ae],uni-button[data-v-1e4a09ae],uni-input[type=reset][data-v-1e4a09ae],uni-input[type=submit][data-v-1e4a09ae]{-webkit-appearance:button;cursor:pointer}uni-button[disabled][data-v-1e4a09ae],uni-input[disabled][data-v-1e4a09ae]{cursor:default}uni-input[type=checkbox][data-v-1e4a09ae],uni-input[type=radio][data-v-1e4a09ae]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0}uni-input[type=search][data-v-1e4a09ae]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}uni-input[type=search][data-v-1e4a09ae]::-webkit-search-decoration{-webkit-appearance:none}uni-input[data-v-1e4a09ae]:focus{outline:none}select[multiple][data-v-1e4a09ae],select[size][data-v-1e4a09ae],select[size][multiple][data-v-1e4a09ae]{border:1px solid #aaa;padding:0}article[data-v-1e4a09ae],aside[data-v-1e4a09ae],details[data-v-1e4a09ae],figcaption[data-v-1e4a09ae],figure[data-v-1e4a09ae],footer[data-v-1e4a09ae],header[data-v-1e4a09ae],hgroup[data-v-1e4a09ae],main[data-v-1e4a09ae],nav[data-v-1e4a09ae],section[data-v-1e4a09ae],summary[data-v-1e4a09ae]{display:block}uni-audio[data-v-1e4a09ae],uni-canvas[data-v-1e4a09ae],uni-progress[data-v-1e4a09ae],uni-video[data-v-1e4a09ae]{display:inline-block}body[data-v-1e4a09ae]{background:#fff}uni-input[data-v-1e4a09ae]::-webkit-input-speech-button{display:none}uni-button[data-v-1e4a09ae],uni-input[data-v-1e4a09ae],uni-textarea[data-v-1e4a09ae]{-webkit-tap-highlight-color:transparent}uni-page-body[data-v-1e4a09ae]{width:100%;height:100%;background:#191919}.contentBox[data-v-1e4a09ae]{width:100%;height:100%;overflow:hidden}.scrollView[data-v-1e4a09ae]{width:100%;height:100%}.scrollView .main[data-v-1e4a09ae]{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.scrollView .main .top[data-v-1e4a09ae]{position:fixed;top:%?0?%;z-index:999;width:100%;height:%?100?%;background:#252525;font-size:%?30?%;color:#fff;line-height:%?100?%;text-align:center}.scrollView .main .center[data-v-1e4a09ae]{margin-top:%?100?%}.scrollView .main .center .new[data-v-1e4a09ae]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;width:%?694?%;height:%?129?%;padding:%?0?% %?28?%}.scrollView .main .center .new .img[data-v-1e4a09ae]{width:%?90?%;height:%?90?%;margin-right:%?40?%}.scrollView .main .center .new .p[data-v-1e4a09ae]{width:%?565?%;border-bottom:%?1?% solid #343434;line-height:%?129?%;font-size:%?26?%;color:#fff}.scrollView .main .center .list[data-v-1e4a09ae]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding:%?0?% %?28?%;width:%?694?%;height:%?113?%;position:relative}.scrollView .main .center .list .photo[data-v-1e4a09ae]{background:#646464;height:%?90?%;width:%?90?%;border-radius:50%;margin-right:%?40?%}.scrollView .main .center .list .newMsgNum[data-v-1e4a09ae]{width:%?44?%;height:%?44?%;line-height:%?44?%;text-align:center;font-size:%?20?%;position:absolute;color:#fff;background:red;border-radius:50%;left:%?92?%;top:%?12?%}.scrollView .main .center .list .content[data-v-1e4a09ae]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;height:%?113?%;border-bottom:%?1?% solid #343434}.scrollView .main .center .list .content .name[data-v-1e4a09ae]{width:%?565?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between}.scrollView .main .center .list .content .name .nameArea[data-v-1e4a09ae]{width:%?300?%;height:%?62?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.scrollView .main .center .list .content .name .nameArea .id[data-v-1e4a09ae]{color:#fff;font-size:%?26?%;line-height:%?26?%;max-width:%?275?%;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.scrollView .main .center .list .content .name .nameArea .status[data-v-1e4a09ae]{margin-left:%?11?%;height:%?12?%;width:%?12?%;background:#00ff2a;border-radius:50%}.scrollView .main .center .list .content .name .data[data-v-1e4a09ae]{color:#acacac;font-size:%?22?%;line-height:%?22?%;float:right}.scrollView .main .center .list .content .p[data-v-1e4a09ae]{width:%?565?%;color:#acacac;font-size:%?22?%;line-height:%?22?%;margin-top:%?9?%;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.scrollView .main .tabbarArea[data-v-1e4a09ae]{height:%?90?%;width:100%;position:fixed;bottom:0;left:0;z-index:9999;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;background:#191919}.scrollView .main .tabbarArea .per[data-v-1e4a09ae]{width:%?54?%;height:%?50?%}.scrollView .main .tabbarArea .per .img[data-v-1e4a09ae]{width:%?54?%;height:%?50?%}body.?%PAGE?%[data-v-1e4a09ae]{background:#191919}',""])}}]);